<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>AttendX — Teacher Panel</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Google Fonts: Syne (display) + DM Sans (body) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@600;700;800&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet" />
</head>
<body>

  <!-- ─── SPLASH SCREEN ─── -->
  <div id="splash" class="splash">
    <div class="splash-inner">
      <div class="splash-icon">
        <svg width="44" height="44" viewBox="0 0 44 44" fill="none">
          <rect width="44" height="44" rx="14" fill="url(#sg)"/>
          <path d="M13 22L19.5 28.5L31 16" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          <defs>
            <linearGradient id="sg" x1="0" y1="0" x2="44" y2="44" gradientUnits="userSpaceOnUse">
              <stop stop-color="#4F46E5"/>
              <stop offset="1" stop-color="#7C3AED"/>
            </linearGradient>
          </defs>
        </svg>
      </div>
      <h1 class="splash-title">AttendX</h1>
      <p class="splash-sub">Teacher Panel</p>
    </div>
  </div>

  <!-- ─── APP ROOT ─── -->
  <div id="app" class="app hidden">

    <!-- TOP HEADER -->
    <header class="app-header">
      <div class="header-left">
        <div class="header-icon">
          <svg width="22" height="22" viewBox="0 0 44 44" fill="none">
            <rect width="44" height="44" rx="14" fill="url(#hg)"/>
            <path d="M13 22L19.5 28.5L31 16" stroke="white" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/>
            <defs>
              <linearGradient id="hg" x1="0" y1="0" x2="44" y2="44">
                <stop stop-color="#4F46E5"/><stop offset="1" stop-color="#7C3AED"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <span class="header-brand">AttendX</span>
      </div>
      <div class="header-right">
        <div class="header-date" id="headerDate"></div>
      </div>
    </header>

    <!-- ─── DASHBOARD VIEW ─── -->
    <section id="dashboardView" class="view active">
      <div class="section-label">TEACHER PANEL</div>
      <h2 class="section-title">Select Subject</h2>
      <p class="section-sub">Choose a subject to start taking attendance</p>

      <div class="subjects-grid" id="subjectsGrid">
        <!-- Cards injected by JS -->
      </div>
    </section>

    <!-- ─── SUBJECT PANEL (BOTTOM SHEET) ─── -->
    <div id="sheetOverlay" class="sheet-overlay hidden" aria-hidden="true"></div>
    <div id="subjectSheet" class="subject-sheet" role="dialog" aria-modal="true">
      <div class="sheet-handle"></div>

      <div class="sheet-header">
        <div class="sheet-badge" id="sheetBadge">LAB</div>
        <h3 class="sheet-subject" id="sheetSubject">DS (Lab)</h3>
      </div>

      <div class="code-card" id="codeCard">
        <p class="code-label">Attendance Code</p>
        <div class="code-value" id="codeValue">—</div>
        <button class="code-refresh" id="codeRefresh" title="Regenerate code" aria-label="Regenerate code">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/>
            <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
          </svg>
          <span>New Code</span>
        </button>
      </div>

      <div class="info-row">
        <div class="info-chip">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
          <span id="chipDate">—</span>
        </div>
        <div class="info-chip">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
          <span id="chipTime">—</span>
        </div>
      </div>

      <div class="sheet-actions">
        <button class="btn-primary" id="startAttendanceBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
          Start Attendance
        </button>
        <button class="btn-secondary" id="checkAttendanceBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
          Check Attendance
        </button>
        <button class="btn-ghost" id="closeSheetBtn">Cancel</button>
      </div>
    </div>

    <!-- ─── CHECK ATTENDANCE BOTTOM SHEET ─── -->
    <div id="checkSheetOverlay" class="sheet-overlay hidden"></div>
    <div id="checkSheet" class="subject-sheet check-sheet" role="dialog" aria-modal="true">
      <div class="sheet-handle"></div>
      <div class="sheet-header">
        <h3 class="sheet-subject">Check Attendance</h3>
        <p class="sheet-subject-sub" id="checkSubjectLabel">—</p>
      </div>

      <div class="date-picker-section">
        <p class="picker-label">Select Date</p>
        <input type="date" id="datePicker" class="date-input" />
        <button class="btn-primary fetch-btn" id="fetchAttendanceBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          Fetch Records
        </button>
      </div>

      <div id="attendanceResults" class="attendance-results hidden">
        <div class="results-header">
          <span class="results-title">Attendance Records</span>
          <span class="results-count" id="resultsCount">0 records</span>
        </div>
        <div id="resultsList" class="results-list"></div>
      </div>

      <div id="attendanceEmpty" class="attendance-empty hidden">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.3"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
        <p>No records found for this date</p>
      </div>

      <div id="attendanceLoader" class="attendance-loader hidden">
        <div class="spinner"></div>
        <p>Fetching records…</p>
      </div>

      <button class="btn-ghost check-close" id="closeCheckSheetBtn">Close</button>
    </div>

    <!-- ─── TOAST ─── -->
    <div id="toast" class="toast" role="status" aria-live="polite"></div>

  </div><!-- /app -->

  <script src="app.js"></script>
</body>
</html>